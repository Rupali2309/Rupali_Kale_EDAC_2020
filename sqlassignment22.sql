SHOW DATABASES;

USE RUPALI;
 Drop table PUBLISHERS;
Drop table SUBJECTS;
 Drop table AUTHORS;
 Drop table TITLES;
 Drop table TITLEAUTHORS;
 CREATE TABLE PUBLISHERS
(
    PUBID      INTEGER(3)   PRIMARY KEY,
    PNAME      VARCHAR(30),
    EMAIL      VARCHAR(50)  UNIQUE,
    PHONE      VARCHAR(30)
);
CREATE TABLE  SUBJECTS
(
    SUBID      VARCHAR(5) PRIMARY KEY,
    SNAME      VARCHAR(30)
);


CREATE TABLE  AUTHORS
(
    AUID     INTEGER(5)  PRIMARY KEY,
    ANAME      VARCHAR(30),
    EMAIL      VARCHAR(50)  UNIQUE,
    PHONE      VARCHAR(30)
);


CREATE TABLE  TITLES
(
    TITLEID    INTEGER(5) PRIMARY KEY,
    TITLE      VARCHAR(30),
    PUBID      INTEGER(3),
    SUBID      VARCHAR(5),
    PUBDATE    DATE,
    COVER      CHAR(1)  CHECK ( COVER IN ('P','H','p','h')),
     PRICE      INTEGER(4),
	CONSTRAINT TITLES_PUBID_FK FOREIGN KEY (PUBID) REFERENCES PUBLISHERS(PUBID),
	CONSTRAINT TITLES_SUBID_FK FOREIGN KEY (SUBID) REFERENCES SUBJECTS(SUBID)
);



CREATE TABLE  TITLEAUTHORS
(
    TITLEID    INTEGER(5) ,
    AUID       INTEGER(5) ,
    IMPORTANCE INTEGER(2),
   PRIMARY KEY(TITLEID,AUID),
   CONSTRAINT  TITLESAUTHORS_TITLEID_FK FOREIGN KEY (TITLEID) REFERENCES TITLES(TITLEID),
   CONSTRAINT  TITLESAUTHORS_AUTHID_FK FOREIGN KEY (AUID) REFERENCES AUTHORS(AUID)
);


CREATE TABLE  SUBJECTS_BACKUP
(
    SUBID      VARCHAR(5) PRIMARY KEY,
    SNAME      VARCHAR(30)
 );


INSERT INTO SUBJECTS VALUES ('OR','ORACLE DATABASE 10g');
 INSERT INTO SUBJECTS VALUES ('JA','JAVA LANGUAGE');
 INSERT INTO SUBJECTS VALUES ('JE','JAVA ENTEPRISE EDITION');
 INSERT INTO SUBJECTS VALUES ('V','VISUAL BASIC.NET');
 INSERT INTO SUBJECTS VALUES ('AS','ASP.NET');
 
DESC PUBLISHERS;
DESC SUBJECTS;
DESC AUTHORS;
DESC TITLES;
DESC TITLEAUTHORS;


INSERT INTO PUBLISHERS VALUES (1,'WILLEY','WDT@VSNL.NET','91-11-23260877');
INSERT INTO PUBLISHERS VALUES (2,'WROX','INFO@WROX.COM',NULL);
INSERT INTO PUBLISHERS VALUES (3,'TATA MCGRAW-HILL','FEEDBACK@TATAMCGRAWHILL.COM','91-11-33333322');
 INSERT INTO PUBLISHERS VALUES (4,'TECHMEDIA','BOOKS@TECHMEDIA.COM','91-11-33257660');



INSERT INTO AUTHORS VALUES (101, 'HERBERT SCHILD','HERBERT@YAHOO.COM',NULL);
INSERT INTO AUTHORS VALUES (102, 'JAMES GOODWILL','GOODWILL@HOTMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (103, 'DAVAID HUNTER','HUNTER@HOTMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (104, 'STEPHEN WALTHER','WALTHER@GMAIL.COM',NULL);
INSERT INTO AUTHORS VALUES (105, 'KEVIN LONEY','LONEY@ORACLE.COM',NULL);
INSERT INTO AUTHORS VALUES (106, 'ED. ROMANS','ROMANS@THESERVERSIDE.COM',NULL);



INSERT INTO TITLES VALUES (1001,'ASP.NET UNLEASHED',4,'ASP','12-04-02','P',540);
INSERT INTO TITLES VALUES (1002,'ORACLE10G COMP. REF.',3,'ORA','1-05-05','P',575);
INSERT INTO TITLES VALUES (1003,'MASTERING EJB',1,'JEE','3-02-05','P',475);
INSERT INTO TITLES VALUES (1004,'JAVA COMP. REF',3,'JAVA','3-06-05','P',499);
INSERT INTO TITLES VALUES (1005,'PRO. VB.NET',2,'VB','15-06-05','P',450);

INSERT INTO TITLEAUTHORS VALUES (1001,104,1);
INSERT INTO TITLEAUTHORS VALUES (1002,105,1);

INSERT INTO TITLEAUTHORS VALUES (1003,106,1);

INSERT INTO TITLEAUTHORS VALUES (1004,101,1);

INSERT INTO TITLEAUTHORS VALUES (1005,103,1);
INSERT INTO TITLEAUTHORS VALUES (1005,102,2);


SELECT SNAME FROM SUBJECTS WHERE SNAME='ORACLE';

SELECT SNAME FROM SUBJECTS WHERE SNAME LIKE 'J%';
SELECT * FROM SUBJECTS;
SELECT SNAME FROM SUBJECTS WHERE SNAME LIKE '%.NET';

SELECT * FROM AUTHORS;
SELECT ANAME FROM AUTHORS WHERE ANAME LIKE '%ER';

SELECT * FROM PUBLISHERS;
 
DESC TITLES;
SELECT TITLE FROM TITLES WHERE PRICE<500;
SELECT TITLE FROM TITLES WHERE PUBDATE <'4-03';

DESC SUBJECT;
SELECT * FROM SUBJECTS;
SELECT SNAME FROM SUBJECTS WHERE SUBID='JAVA' OR SUBID='JEE';
SELECT * FROM AUTHORS;
SELECT ANAME FROM AUTHORS WHERE AUID > 103;
SELECT * FROM TITLES;
SELECT * FROM TITLES WHERE TITLEID=101 OR PRICE >400;
SELECT * FROM PUBLISHERS;
SELECT * FROM PUBLISHERS WHERE PNAME IN('TECHMEDIA','WROX');
show databases;
use rupali;
show tables;
SELECT * FROM TITLES;
DESC TITLES;
SELECT MAX (PRICE)FROM TITLES;

SELECT * FROM TITLEAUTHORS;
SELECT avg(IMPORTANCE) FROM TITLEAUTHORS;
SELECT COUNT(*) FROM AUTHORS; 

